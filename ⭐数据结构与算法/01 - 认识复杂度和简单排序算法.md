# 2025年10月21日
## 简单排序
### 选择排序
> 将 `i~n-1` 上的 `min` 放到第 `i` 个位置上。
```js
    // 选择排序
    function selectionSort(arr) {
      if (arr === null || arr.length < 2) return;
      for (let i = 0; i < arr.length - 1; i++) {
        let minIndex = i;
        for (let j = i + 1; j < arr.length; j++) {
          minIndex = arr[j] < arr[minIndex] ? j : minIndex;
        }
        swap(arr, i, minIndex)
        // [arr[minIndex], arr[i]] = [arr[i], arr[minIndex]]
      }
    }
```

### 冒泡排序
> 将 `0~n-i` 上的 `max` 放到第 `i` 个位置上。
- 可以在一次循环没有发生交换的时候退出循环，完成排序。
```js
    // 冒泡排序，从 0 到 n-i
    function bubbleSort(arr) {
      if (arr === null || arr.length < 2) return;
      for (let i = 0; i < arr.length; i++) {
        for (let j = 0; j < arr.length - i - 1; j++) {
          if (arr[j] > arr[j + 1]) {
            [arr[j], arr[j + 1]] = [arr[j + 1], arr[j]];
          }
        }
      }
    }
```


### 插入排序
> 每一次排序使得`0~i`有序。
- 某些数据下更快，达到接近$O(n)$。
```js
    // 插入排序
    function insertionSort(arr) {
      if (arr === null || arr.length < 2) return;
      for (let i = 1; i < arr.length; i++) {
        for (let j = i - 1; j >= 0; j--) {
          arr[j] > arr[j + 1] && ([arr[j], arr[j + 1]] = [arr[j + 1], arr[j]])
        }
      }
    }
```


## 异或
> 两数相同为0，不同为1，即在二进制中不进位相加。

- `a ^ 0 = a`
- `a ^ a = 0`

### 利用异或交换两个数
- js可以使用解构交换
```js
    function swap(arr, a, b) {
      if (a == b) return;
      arr[a] = arr[a] ^ arr[b]; // a = a ^ b
      arr[b] = arr[a] ^ arr[b]; // b = (a ^ b) ^ b = a
      arr[a] = arr[a] ^ arr[b]; // a = (a ^ b) ^ a = b
    }
```

### 【题目】数组中一种数a有奇数个，其他数都是偶数个，怎么找出a
- 将数组从头异或到尾，结果为`a`。
```js
    function findOddTimesNumber1(arr) {
      return arr.reduce((a, c) => a ^ c, 0);
    }
```

### 【题目】数组中两种数a、b有奇数个，其他数都是偶数个，怎么找出a和b
- 将数组从头异或到尾，结果为`a ^ b`且`!==0`。
- 由`a!==b`，二进制中总有一位异或的结果为`1`，此时`a`和`b`在该位置取值不同
```js
    function findOddTimesNumber2(arr) {
      let eor = arr.reduce((a, c) => a ^ c, 0) // eor = a ^ b
      let rightOne = eor & (~eor + 1) // 提取最右边的1
      let a = arr.reduce((acc, num) => (num & rightOne) !== 0 ? acc ^ num : acc, 0);
      // a & c === 1或0都可以，只要一侧
      return [a, a ^ eor];
    }
```



## 二分
时间复杂度是：$O(n)=logn$。

### 【题目】有序数组找一个数是否存在
### 【题目】有序数组找最左侧>=某个数的位置
### 【题目】局部最小值

## 对数器
> 通过一个时间复杂度不好但容易实现的办法b，通过大量随机样本，测试验证方法a是否正确。

```js
    function generateRandomArray(maxSize, maxValue) {
      const size = Math.floor(Math.random() * (maxSize + 1))
      let arr = []
      for (let i = 0; i < size; i++)
        arr.push(Math.floor(Math.random() * (maxValue + 1)))
      return arr;
    }
    
    function isArraysEqual(a, b) {
      if (a.length !== b.length) return false;
      for (let i = 0; i < a.length; i++) {
        if (a[i] !== b[i]) return false;
      }
      return true;
    }
    
    function test() {
      let testTime = 50;
      let maxSize = 100;
      let maxValue = 100;
      for (let i = 0; i < testTime; i++) {
        let arr1 = generateRandomArray(maxSize, maxValue);
        let arr2 = [...arr1]
        insertionSort(arr1)
        arr2.sort((a, b) => a - b);// 直接修改
        console.log(isArraysEqual(arr1, arr2));
      }
    }
```
